{% extends "authentication/auth_base.html" %}

{% load static %}


{% block css %}
  {{block.super}}
  <style>
    body{
      background-color: white;}
  </style>
{% endblock css %}


<!-- Seo tags -->
{% block seo %}
<title>Trezunt Reset Password</title>      
<meta name="keywords" content="trezunt, online earning, prediction game">
<meta name="robots" content="noindex" >
{% endblock seo %}

{% block content %}


<div class="container parent-box" > 
    <div class="text-center pt-5 logo"> 
        <img style="width: 230px; height: 40px;"   class="" src="{% static 'core/images/dark_logo.png' %}" alt="">
    </div>
    <div class="mx-5">
    <h5 class="rainbow-text" >Enter New Password</h5>
    <p class="text-muted" >Please enter your new password twice so we can verify you typed it in correctly.</p>

    <form onsubmit="return validate()" method="POST" enctype="multipart/form-data" novalidate>
        {%csrf_token %}
        <div id="password1-border" class="mb-3 row">
            {{form.new_password1}}
        </div>

        <p style="font-size: 12px;" id="password1-error" class=" text-center text-danger"></p>
        <p style="font-size: 12px;" id="password2-error" class=" text-center text-danger"></p>
        <p style="font-size: 12px;" id="password3-error" class=" text-center text-danger"></p>
        <p style="font-size: 12px;" id="password4-error" class=" text-center text-danger"></p>

        <div id="password2-border" class="mb-3 row">
           {{form.new_password2}}
        </div>

        <p style="font-size: 12px;"  id="password5-error" class=" text-center text-danger"></p>

        <div class="d-flex justify-content-center">
        <input type="submit" class=" my-1 button-30 "  value="Submit">
        </div> 
    </form>
  </div>
</div>

  
  {% endblock content %}
  {% block js %}
  {{block.super}}
  <script>

const password_validation_regexExp = /^(?=.*[0-9])(?=.*[- ?!@#$%^&*\/\\])(?=.*[A-Z])(?=.*[a-z])[a-zA-Z0-9- ?!@#$%^&*\/\\]{8,30}$/;


// password 1 validation

function password_validation(){
            let pwd1 = $('input[name="new_password1"]').val();
            if(pwd1 == ''){
            $('#password1-error').text('This field is required')
            $('#password2-error').text('')
            $('#password3-error').text('')
            $('#password4-error').text('')
            $('#password1-border').css('background-color','#fdd0d0')
            return false;
          }else{
            if  (password_validation_regexExp.test(pwd1)){
              $('#password1-error').text('')
              $('#password2-error').text('')
              $('#password3-error').text('')
              $('#password4-error').text('')
              $('#password1-border').css('background-color','white')
              return true;
            }else{ 
              $('#password1-error').text('Must have 8 characters')
              $('#password2-error').text('At least one capital letter')
              $('#password3-error').text('At least one special character')
              $('#password4-error').text('At least one numeric letter')
              $('#password1-border').css('background-color','#fdd0d0')
              return false;
        }; }; };


// password2  validation
function both_pwd_validate(){
  let pwd1 = $('input[name="new_password1"]').val();
  let pwd2 = $('input[name="new_password2"]').val();

  if (pwd2 == ""){
      $('#password5-error').text('This field is required')
      $('#password2-border').css('background-color','#fdd0d0')
      return false;
  }else{
    if(pwd1 != pwd2){
      $('#password5-error').text('Password doesnot match')
      $('#password2-border').css('background-color','#fdd0d0')
      return false;
    }else{
      return true;
      $('#password5-error').text('')
      $('#password2-border').css('background-color','white')
  };  };};


function validate(){
  password_validation()
  both_pwd_validate()
  if(password_validation() ==  true &&  both_pwd_validate() == true){
    return true;
  }else{
    return false;
  }

}


  </script>
  {% endblock js %}
